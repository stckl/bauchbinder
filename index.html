<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' data: https://fonts.gstatic.com; img-src 'self' data:; connect-src 'self' ws://localhost:3000 http://localhost:5001 ws://localhost:5001 http://127.0.0.1:5001 ws://127.0.0.1:5001; worker-src 'self' blob:;">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>mstoeckle bauchbinder</title>
  </head>
  
  <body>
    <div id="app" class="ui fluid container inverted">
      <div class="row">
        <div class="col">
          <button class="ui right floated labeled icon red button" v-on:click="stopLowerthird()">
            <i class="eye slash icon"></i>
            ausblenden
          </button>
          <h2>bauchbinder</h2>
        </div>
      </div>

      <div class="ui divider" style="clear:both; padding-top: 20px;"></div>
      
      <div class="ui pointing secondary menu inverted">
        <a class="item active" data-tab="items">Bauchbinden</a>
        <a class="item" data-tab="design">Gestaltung</a>
        <a class="item" data-tab="animation">Animation</a>
        <a class="item" data-tab="info">Info</a>
      </div>

      <div class="ui tab segment active" data-tab="items">
        <div class="row">
          <div class="col" style="text-align: right;">
            <button class="ui inverted green labeled icon button" v-on:click="showModal">
              <i class="plus icon"></i>
              neue Bauchbinde
            </button>
          </div>
        </div>

        <div class="row" style="margin-top:20px;">
          <div class="col">
            <draggable v-model="lowerthirds" item-key="name" draggable=".card" class="ui cards" @end="onDragEnd">
              <template #item="{element, index}">
                <div class="card inverted" v-bind:class="{ active: (active == index) }">
                  <div class="content">
                    <span class="right floated"><i class="edit icon" v-on:click="showModal(index)"></i> {{index+1}}</span>
                    
                    <div class="header">{{element.name}}</div>
                    <div class="description">
                      {{element.title}}
                    </div>
                  </div>
                  <div class="ui bottom attached green button" v-on:click="playLowerthird(index)">
                    <i class="play icon"></i>
                    anzeigen
                  </div>
                </div>
              </template>
            </draggable>
          </div>        
        </div>
      </div>

      <div class="ui tab segment" data-tab="design">
        <div class="row" style="margin-top: 20px;">
          <div class="col">
            <h2>style</h2>
                        <form class="ui form inverted" v-on:submit.prevent>
                          
                          <h4 class="ui dividing header inverted">Bauchbinde</h4>
                          <div class="fields">
                            <div class="four wide field">
                              <label>Breite (min in %)</label>
                              <div class="ui left icon input">
                                <input type="number" step="0.01" min="0" max="100" v-model="design.white.width" placeholder="Breite">
                                <i class="arrows alternate horizontal icon"></i>
                              </div>
                            </div>
                            <div class="four wide field">
                              <label>Abstand links/rechts (in %)</label>
                              <div class="ui left icon input">
                                <input type="number" step="0.01" min="-100" max="100" v-model="design.white.left" placeholder="Abstand seite">
                                <i class="arrow right icon"></i>
                              </div>
                            </div>
                            <div class="four wide field">
                              <label>Abstand unten (in %)</label>
                              <div class="ui left icon input">
                                <input type="number" step="0.01" min="-100" max="100" v-model="design.white.bottom" placeholder="Abstand unten">
                                <i class="arrow up icon"></i>
                              </div>
                            </div>
                            <div class="four wide field">
                              <color-picker v-model="design.white.color" label="Hintergrundfarbe"></color-picker>
                            </div>
                          </div>
                          <div class="fields">
                            <div class="four wide field">
                              <label>Position</label>
                              <div class="ui icon inverted buttons">
                                <button class="ui button" :class="{ blue: (design.white.divalign == 0) }"  v-on:click.prevent="design.white.divalign = 0">
                                  <i class="align left icon"></i>
                                </button>
                                <button class="ui button" :class="{ blue: (design.white.divalign == 1) }"  v-on:click.prevent="design.white.divalign = 1">
                                  <i class="align center icon"></i>
                                </button>
                                <button class="ui button" :class="{ blue: (design.white.divalign == 2) }"  v-on:click.prevent="design.white.divalign = 2">
                                  <i class="align right icon"></i>
                                </button>
                              </div>
                            </div>
                            <div class="four wide field">
                              <label>Text Ausrichtung</label>
                              <div class="ui icon inverted buttons">
                                <button class="ui button" :class="{ blue: (design.white.textalign == 0) }"  v-on:click.prevent="design.white.textalign = 0">
                                  <i class="align left icon"></i>
                                </button>
                                <button class="ui button" :class="{ blue: (design.white.textalign == 1) }"  v-on:click.prevent="design.white.textalign = 1">
                                  <i class="align center icon"></i>
                                </button>
                                <button class="ui button" :class="{ blue: (design.white.textalign == 2) }"  v-on:click.prevent="design.white.textalign = 2">
                                  <i class="align right icon"></i>
                                </button>
                              </div>
                            </div>
              
                            <div class="four wide field">
                              <label>Text Abstand horizontal</label>
                              <div class="ui left icon input">
                                <input type="number" step="0.01" min="0" max="100" v-model="design.white.paddingh" placeholder="Abstand seite">
                                <i class="arrow right icon"></i>
                              </div>
                            </div>
                            <div class="four wide field">
                              <label>Text Abstand vertikal</label>
                              <div class="ui left icon input">
                                <input type="number" step="0.01" min="0" max="100" v-model="design.white.paddingv" placeholder="Abstand unten">
                                <i class="arrow up icon"></i>
                              </div>
                            </div>
                          </div>
                          <div class="fields">
                            <div class="four wide field">
                              <label>Ecken Rundung</label>
                              <div class="ui left icon input">
                                <input type="number" step="1" min="0" max="1000" v-model="design.white.borderradius" placeholder="Ecken Rundung">
                                <i class="square outline icon"></i>
                              </div>
                            </div>
                          </div>
                          
                          <h4 class="ui dividing header inverted">Schrift Name</h4>
                          <div class="field">
                            <label>Schriftart</label>
                            <fomantic-dropdown v-model="design.h1.fontfamily" :options="allFonts" :custom-fonts="design.customFonts" :manual-fonts="manualFonts" :system-fonts="systemFonts"></fomantic-dropdown>
                          </div>
                          <div class="fields">
                            <div class="field">
                              <label>Stil</label>
                              <div class="ui icon inverted buttons">
                                <button class="ui button" :class="{ blue: design.h1.bold }"  v-on:click.prevent="toggleH1Bold()">
                                  <i class="bold icon"></i>
                                </button>
                                <button class="ui button" :class="{ blue: design.h1.italic }"  v-on:click.prevent="toggleH1Italic()">
                                  <i class="italic icon"></i>
                                </button>
                                <button class="ui button" :class="{ blue: design.h1.fontvariant === 'small-caps' }" v-on:click.prevent="toggleH1Variant()" title="Kapitälchen">
                                  <span style="font-variant: small-caps; font-weight: bold;">Aa</span>
                                </button>
                              </div>
                            </div>
                            <div class="field">
                              <label>Umwandlung</label>
                              <div class="ui small basic inverted icon buttons">
                                <button class="ui button" :class="{ blue: design.h1.texttransform === 'none' }" v-on:click.prevent="design.h1.texttransform = 'none'" title="Normal">Aa</button>
                                <button class="ui button" :class="{ blue: design.h1.texttransform === 'uppercase' }" v-on:click.prevent="design.h1.texttransform = 'uppercase'" title="GROSS">AA</button>
                                <button class="ui button" :class="{ blue: design.h1.texttransform === 'lowercase' }" v-on:click.prevent="design.h1.texttransform = 'lowercase'" title="klein">aa</button>
                                <button class="ui button" :class="{ blue: design.h1.texttransform === 'capitalize' }" v-on:click.prevent="design.h1.texttransform = 'capitalize'" title="Erster Groß">Ab</button>
                              </div>
                            </div>
                            <div class="field">
                              <label>Dicke</label>
                              <input type="text" v-model="design.h1.fontweight" placeholder="800" style="width: 80px;">
                            </div>
                            <div class="field">
                              <label>Größe (vh)</label>
                              <input type="number" step="0.1" v-model="design.h1.fontsize" style="width: 80px;">
                            </div>
                            <div class="four wide field">
                              <color-picker v-model="design.h1.color" label="Schriftfarbe Name"></color-picker>
                            </div>
                          </div>
            
                          <h4 class="ui dividing header inverted">Schrift Titel</h4>
                          <div class="field">
                            <label>Schriftart</label>
                            <fomantic-dropdown v-model="design.h2.fontfamily" :options="allFonts" :custom-fonts="design.customFonts" :manual-fonts="manualFonts" :system-fonts="systemFonts"></fomantic-dropdown>
                          </div>
                          <div class="fields">
                            <div class="field">
                              <label>Stil</label>
                              <div class="ui icon inverted buttons">
                                <button class="ui button" :class="{ blue: design.h2.bold }"  v-on:click.prevent="toggleH2Bold()">
                                  <i class="bold icon"></i>
                                </button>
                                <button class="ui button" :class="{ blue: design.h2.italic }"  v-on:click.prevent="toggleH2Italic()">
                                  <i class="italic icon"></i>
                                </button>
                                <button class="ui button" :class="{ blue: design.h2.fontvariant === 'small-caps' }" v-on:click.prevent="toggleH2Variant()" title="Kapitälchen">
                                  <span style="font-variant: small-caps; font-weight: bold;">Aa</span>
                                </button>
                              </div>
                            </div>
                            <div class="field">
                              <label>Umwandlung</label>
                              <div class="ui small basic inverted icon buttons">
                                <button class="ui button" :class="{ blue: design.h2.texttransform === 'none' }" v-on:click.prevent="design.h2.texttransform = 'none'" title="Normal">Aa</button>
                                <button class="ui button" :class="{ blue: design.h2.texttransform === 'uppercase' }" v-on:click.prevent="design.h2.texttransform = 'uppercase'" title="GROSS">AA</button>
                                <button class="ui button" :class="{ blue: design.h2.texttransform === 'lowercase' }" v-on:click.prevent="design.h2.texttransform = 'lowercase'" title="klein">aa</button>
                                <button class="ui button" :class="{ blue: design.h2.texttransform === 'capitalize' }" v-on:click.prevent="design.h2.texttransform = 'capitalize'" title="Erster Groß">Ab</button>
                              </div>
                            </div>
                            <div class="field">
                              <label>Dicke</label>
                              <input type="text" v-model="design.h2.fontweight" placeholder="800" style="width: 80px;">
                            </div>
                            <div class="field">
                              <label>Größe (vh)</label>
                              <input type="number" step="0.1" v-model="design.h2.fontsize" style="width: 80px;">
                            </div>
                            <div class="four wide field">
                              <color-picker v-model="design.h2.color" label="Schriftfarbe Titel"></color-picker>
                            </div>
                          </div>
            
                                        <h4 class="ui dividing header inverted">Eigene Schriftarten (Base64)</h4>
                            <div class="field">

                              <div class="ui segment" 

                                   style="border: 2px dashed #444; background: #1b1c1d; padding: 20px; text-align: center; cursor: pointer;"

                                   @dragover.prevent @drop.prevent="handleFontDrop"

                                   @click="addCustomFont">
                  <i class="huge upload icon" style="color: #555;"></i>
                  <p style="margin-top: 10px; color: #888;">Schriftarten hierher ziehen oder klicken (.ttf, .otf, .woff)</p>
                </div>
                
                <div class="ui middle aligned divided list inverted" style="margin-top: 10px;">
                  <div v-for="(font, index) in design.customFonts" :key="index" class="item" style="padding: 10px 0;">
                    <div class="right floated content">
                      <div class="ui mini inverted basic blue button" @click="applyFontToH1(font.name)">Name</div>
                      <div class="ui mini inverted basic green button" @click="applyFontToH2(font.name)">Titel</div>
                      <div class="ui mini inverted red icon button" @click="removeCustomFont(index)"><i class="trash icon"></i></div>
                    </div>
                    <i class="font icon"></i>
                    <div class="content">
                      <div class="header" :style="{ fontFamily: font.name }">{{ font.name }}</div>
                    </div>
                  </div>
                </div>
              </div>

              <h4 class="ui dividing header inverted">Unified CSS Editor</h4>
              <div class="field">
                <css-editor v-model="design.unifiedCss"></css-editor>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div class="ui tab segment" data-tab="animation">
        <div class="row" style="margin-top: 20px;">
          <div class="col">
            <h2>animation</h2>
          </div>
          <div class="col" style="margin-top:20px;">
            <div class="ui inverted buttons">
              <button class="ui labeled icon button" v-bind:class="[animation.type == 'fade' ? 'primary' : 'secondary']" v-on:click.prevent="setAnimation('fade')">
                <i class="adjust icon"></i>
                fade
              </button>
              <button class="ui labeled icon button" v-bind:class="[animation.type == 'slideleft' ? 'primary' : 'secondary']" v-on:click.prevent="setAnimation('slideleft')">
                <i class="long arrow alternate right icon"></i>
                slideleft
              </button>
              <button class="ui labeled icon button" v-bind:class="[animation.type == 'slideright' ? 'primary' : 'secondary']" v-on:click.prevent="setAnimation('slideright')">
                <i class="long arrow alternate left icon"></i>
                slideright
              </button>
              <button class="ui labeled icon button" v-bind:class="[animation.type == 'slideup' ? 'primary' : 'secondary']" v-on:click.prevent="setAnimation('slideup')">
                <i class="long arrow alternate up icon"></i>
                slideup
              </button>
              <button class="ui labeled icon button" v-bind:class="[animation.type == 'slideup_textdelay' ? 'primary' : 'secondary']" v-on:click.prevent="setAnimation('slideup_textdelay')">
                <i class="long arrow alternate up icon"></i>
                slideup textdelay
              </button>
            </div>
          </div>
          <div class="col" style="margin-top:20px;">
            <button class="ui inverted labeled icon button" v-bind:class="[animation.type == 'custom' ? 'primary' : 'secondary']" v-on:click.prevent="setAnimation('custom')">
              <i class="random icon"></i>
              custom
            </button>
          </div>
        </div>

        <div v-if="animation.type == 'custom'" class="col" style="margin-top: 40px;">
          <form class="ui form inverted" v-on:submit.prevent>
            <h4 class="ui dividing header inverted">Custom Animation</h4>
            <textarea v-model="animation.code" style="min-height: 80vh;"></textarea>  
          </form>
        </div>

        <div class="col" style="margin-top: 40px;">
          <form class="ui form inverted" v-on:submit.prevent>
            <h4 class="ui dividing header inverted">Animationsparameter</h4>
            <div class="fields">
              <div class="four wide field inverted">
                <label>Dauer (in Millisekunden)</label>
                <div class="ui left icon input inverted">
                  <input type="number" step="1" min="1" max="5000" name="fxduration" v-model="animation.duration" maxlength="4" placeholder="Dauer">
                  <i class="hourglass end icon inverted"></i>
                </div>
              </div>
              <div class="four wide field inverted">
                <label>Bescheunigungskurve</label>
                <div class="ui left icon input inverted">
                  <select class="ui inverted dropdown" v-model="animation.easing">
                    <option value="linear">linear</option>
                    <option value="easeInQuad">easeInQuad</option>
                    <option value="easeInCubic">easeInCubic</option>
                    <option value="easeInQuart">easeInQuart</option>
                    <option value="easeInQuint">easeInQuint</option>
                    <option value="easeInSine">easeInSine</option>
                    <option value="easeInExpo">easeInExpo</option>
                    <option value="easeInCirc">easeInCirc</option>
                    <option value="easeInBack">easeInBack</option>
                    <option value="easeInBounce">easeInBounce</option>
                    <option value="easeInOutQuad">easeInOutQuad</option>
                    <option value="easeInOutCubic">easeInOutCubic</option>
                    <option value="easeInOutQuart">easeInOutQuart</option>
                    <option value="easeInOutQuint">easeInOutQuint</option>
                    <option value="easeInOutSine">easeInOutSine</option>
                    <option value="easeInOutExpo">easeInOutExpo</option>
                    <option value="easeInOutCirc">easeInOutCirc (Standard)</option>
                    <option value="easeInOutBack">easeInOutBack</option>
                    <option value="easeInOutBounce">easeInOutBounce</option>
                    <option value="easeOutQuad">easeOutQuad</option>
                    <option value="easeOutCubic">easeOutCubic</option>
                    <option value="easeOutQuart">easeOutQuart</option>
                    <option value="easeOutQuint">easeOutQuint</option>
                    <option value="easeOutSine">easeOutSine</option>
                    <option value="easeOutExpo">easeOutExpo</option>
                    <option value="easeOutCirc">easeOutCirc</option>
                    <option value="easeOutBack">easeOutBack</option>
                    <option value="easeOutBounce">easeOutBounce</option>
                  </select>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>

      <div class="ui tab segment" data-tab="info">
        <div class="row" style="margin-top: 20px;">
          <div class="col">
            <h2>infos</h2>
            <div class="ui inverted segment">
              <h3>Bauchbinder einbinden</h3>
              <p>Link für OBS Browser Quelle: <a href="http://127.0.0.1:5001" v-on:click.prevent="require('electron').shell.openExternal('http://127.0.0.1:5001');">http://127.0.0.1:5001</a></p>
              <h3>Key and Fill per HDMI</h3>
              <p>Vollbild für Key und Fill Fenster: Doppelclick ins Fenster</p>
              <h3>Shortcuts und Compagnion Einbindung</h3>
              <p>Shortcuts: [STRG/CTRL]+[ALT/OPTION]+[0-9] wobei 0 ausblenden, und 1-9 einblenden nach ID ist</p>
              <p>Compagnion Anbindung über "Generic HTTP Modul":<br>BaseURL: http://localhost:5001/v1/<br>Button Action anzeigen: [POST] "show/X" wobei X die ID des Eintrags ist z.B. "show/1"<br>Button Action ausblenden: [POST] "hide"</p>
              <p></p>
              <h3>Bleibe auf dem neuesten Stand</h3>
              <p>Bauchbinder auf GitHub:  <a v-on:click.prevent="require('electron').shell.openExternal('https://github.com/stckl/bauchbinder');">https://github.com/stckl/bauchbinder</a></p>
              <p></p>
              <h3>Helferlein für CSS</h3>
              <p>Flexbox Layouting: <a v-on:click.prevent="require('electron').shell.openExternal('https://css-tricks.com/snippets/css/a-guide-to-flexbox/');">https://css-tricks.com/snippets/css/a-guide-to-flexbox/</a></p>
              <p>Farbverlauf: <a v-on:click.prevent="require('electron').shell.openExternal('https://cssgradient.io');">https://cssgradient.io</a></p>
              <p>SVGs einbinden: <a v-on:click.prevent="require('electron').shell.openExternal('https://yoksel.github.io/url-encoder/');">https://yoksel.github.io/url-encoder/</a></p>
              <p>Images einbinden: <a v-on:click.prevent="require('electron').shell.openExternal('https://www.base64-image.de');">https://www.base64-image.de</a></p>
            </div>
          </div>
        </div>
      </div>

      <div class="row" style="margin-top: 50px;">
        <div class="col" style="clear: both; margin-top:20px;">
          <div class="ui divider"></div>

          <button class="ui right floated labeled icon inverted button" v-on:click="openFile">
            <i class="folder open icon"></i>
            öffnen
          </button>
          <button class="ui right floated labeled icon inverted button" v-on:click="saveFile">
            <i class="save icon"></i>
            speichern
          </button>
      
          <button class="ui floated labeled icon inverted teal button" v-on:click="openWinKey">
            <i class="window maximize outline icon"></i>
            key
          </button>
          <button class="ui floated labeled icon inverted teal button" v-on:click="openWinFill">
            <i class="window maximize outline icon"></i>
            fill
          </button>
          <div style="clear:both; height: 30px;"></div>
        </div>
      </div>

      <!-- app end -->

      <!-- lower third modal -->
      <div class="ui inverted modal" id="entry-modal">
        <i class="close icon"></i>
        <div v-if="newentryid == null" class="header inverted">
          Neue Bauchbinde
        </div>
        <div v-else class="header inverted">
          Bauchbinde Nr. {{newentryid}}
        </div>
        <div class="content inverted" style="background: #1b1c1d;">
          <div class="row">
            <div class="col">
              <div style="margin-top: 10px;">
              <form class="ui inverted form" v-on:submit.prevent="addLowerthird">
                <div class="field">
                  <label>Name</label>
                  <input type="text" name="name" placeholder="Name" v-model="newname">
                </div>
                <div class="field">
                  <label>Titel</label>
                  <input type="text" name="title" placeholder="Titel" v-model="newtitle">
                </div>
              </form>
              </div>
            </div>        
          </div>
        </div>
        <div class="actions inverted" style="background: #1b1c1d;">
          <div v-if="newentryid != null" class="ui icon inverted red deny button" v-on:click="deleteLowerthird(newentryid)"><i class="trash icon"></i></div>
          <div class="ui inverted black deny button">abbrechen</div>
          <div v-if="newentryid == null" class="ui inverted green right labeled icon button" v-on:click="addLowerthird">hinzufügen <i class="plus icon"></i></div>
          <div class="ui inverted positive right labeled icon button" v-on:click="addLowerthird">
            speichern und beenden
            <i class="checkmark icon"></i>
          </div>
        </div>
      </div>

      <div class="copy">2026 - with ❤️ from mstockle.de version: {{ appversion }}</div>

      <!-- conflict resolution modal -->
      <div class="ui inverted modal" id="conflict-modal">
        <div class="header inverted">CSS Duplikate gefunden</div>
        <div class="content inverted" style="background: #1b1c1d;">
          <p>Die geladene Datei enthält Design-Einstellungen, die sowohl in der GUI als auch im Custom-CSS definiert sind. Bitte wähle für jeden Konflikt, welcher Wert behalten werden soll:</p>
          <div class="ui middle aligned divided list inverted">
            <div v-for="(c, index) in cssConflicts" :key="index" class="item" style="padding: 15px 0;">
              <div class="content">
                <div class="header" style="color: #adff2f;">Selektor: {{ c.selector }} &raquo; Eigenschaft: {{ c.property }}</div>
                <div class="description" style="margin-top: 10px;">
                  <div class="ui two column grid">
                    <div class="column">
                      <div class="ui segment inverted">
                        <div class="ui top attached label">GUI Standard</div>
                        <code>{{ c.guiValue }}</code>
                        <button class="ui fluid basic inverted button" style="margin-top: 10px;" @click="resolveConflict(index, 'gui')">Behalten</button>
                      </div>
                    </div>
                    <div class="column">
                      <div class="ui segment inverted secondary">
                        <div class="ui top attached label teal">Custom CSS (Empfohlen)</div>
                        <code>{{ c.customValue }}</code>
                        <button class="ui fluid teal button" style="margin-top: 10px;" @click="resolveConflict(index, 'custom')">Behalten</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <script type="module" src="src/renderer/main.js"></script>
  </body>
</html>
