<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>bauchbinder - fill</title>
    <link rel="stylesheet" href="/css/basic_fill.css">
    <script>
        if (typeof require !== 'undefined') {
            window.jQuery = window.$ = require('jquery');
        }

        // Chromakey mode: set background color from URL params
        (function() {
            const params = new URLSearchParams(window.location.search);
            if (params.get('chromakey') === '1') {
                const r = parseInt(params.get('r')) || 0;
                const g = parseInt(params.get('g')) || 177;
                const b = parseInt(params.get('b')) || 64;
                document.documentElement.style.setProperty('--chromakey-bg', `rgb(${r}, ${g}, ${b})`);
                document.addEventListener('DOMContentLoaded', function() {
                    document.body.style.background = `rgb(${r}, ${g}, ${b})`;
                });
            }

            // Listen for runtime chromakey color changes (IPC)
            if (typeof require !== 'undefined') {
                const { ipcRenderer } = require('electron');
                ipcRenderer.on('set-chromakey-color', (event, color) => {
                    const { r, g, b } = color;
                    document.body.style.background = `rgb(${r}, ${g}, ${b})`;
                });
            }
        })();
    </script>
</head>
<body class="fill">
    <div id="bauchbinde-container"></div>
    <script type="module">
        import { initEngine } from './src/renderer/playout-engine.js';
        initEngine('fill');
    </script>
</body>
</html>